////
////    privacyControl - JS
////    V 1.0 by Louis Mudrack
////    06/30/2023
////
////////////////////

const cookieManagerToggler=document.createElement("cookie-manager-toggler"),cookieManager=document.createElement("cookie-manager"),cmInfo=document.createElement("cm-info"),cmClose=document.createElement("cm-close"),cmText=document.createElement("cm-text"),cmButtons=document.createElement("cm-buttons"),cmBody=document.createElement("cm-body"),cmFooter=document.createElement("cm-footer"),cmLinkZurueck=document.createElement("cm-link"),cmLinkImpressum=document.createElement("cm-link"),cmLinkDatenschutz=document.createElement("cm-link");cookieManagerToggler.textContent="Manage Cookies",cookieManagerToggler.classList.add("closed"),document.body.appendChild(cookieManagerToggler),cmText.textContent="Diese Website nutzt Cookies oder Drittanbieterdienste nur mit Ihrem EinverstÃ¤ndnis - jederzeit wiederruflich und freiwillig!",cmButtons.textContent="Alle akzeptieren",cmClose.textContent="x",cmInfo.appendChild(cmText),cmInfo.appendChild(cmButtons),cmFooter.appendChild(cmLinkZurueck),cmFooter.appendChild(cmLinkImpressum),cmFooter.appendChild(cmLinkDatenschutz),cookieManager.appendChild(cmClose),cookieManager.appendChild(cmInfo),cookieManager.appendChild(cmBody),cookieManager.appendChild(cmFooter),document.body.appendChild(cookieManager);let close=function(){cookieManagerToggler.classList.add("closed"),cookieManagerToggler.classList.remove("hide"),cookieManager.classList.remove("opened")},open=function(){cookieManager.classList.add("opened"),cookieManagerToggler.classList.add("hide"),cookieManagerToggler.classList.remove("closed")};cmClose.addEventListener("click",(function(){close()})),cookieManagerToggler.addEventListener("click",(function(){cookieManagerToggler.classList.contains("closed")?open():close()}));class privacyControl{constructor(e={}){this.deps=[];for(const t in e){if(e.hasOwnProperty(t)){const n={cookies:e[t]};this.deps.push(n)}for(const n in e[t]){const c=document.createElement("cm-row");cmBody.appendChild(c);const o=document.createElement("label");o.setAttribute("for",`privacy-ctrl:${n}`);const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("id",`privacy-ctrl:${n}`),a.setAttribute("name",`${n}`),o.appendChild(a),c.appendChild(o);const i=document.createElement("p");i.textContent="Name:",c.appendChild(i);const d=document.createElement("p");d.textContent=e[t][n].name,c.appendChild(d);const r=document.createElement("p");r.textContent="Anbieter:",c.appendChild(r);const m=document.createElement("p");m.textContent=e[t][n].provider,c.appendChild(m);const l=document.createElement("p");l.textContent="Verwendungszweck:",c.appendChild(l);const s=document.createElement("p");s.textContent=e[t][n].lang,c.appendChild(s);const p=document.createElement("p");p.textContent="Datenschutz:",c.appendChild(p);const u=document.createElement("a");u.textContent="Link",u.setAttribute("href",e[t][n].privacy),u.setAttribute("title",e[t][n].privacy),u.setAttribute("target","_blank"),c.appendChild(u);let g=document.querySelectorAll(`iframe[data-cm-name="${n}"]`),k=document.getElementById(`privacy-ctrl:${n}`);k.addEventListener("change",(function(){g.forEach((e=>{if(k.checked?e.setAttribute("data-cm-accept","true"):e.setAttribute("data-cm-accept","false"),"true"==e.getAttribute("data-cm-accept")){const t=e.getAttribute("data-cm-src");e.setAttribute("src",t),document.cookie=`${n}=accepted`}else e.setAttribute("src",""),document.cookie=`${n}=denied`}))})),!0===document.cookie.includes(`${n}=accepted`)?(k.checked=!0,k.dispatchEvent(new Event("change"))):(k.checked=!1,k.dispatchEvent(new Event("change")))}}}}